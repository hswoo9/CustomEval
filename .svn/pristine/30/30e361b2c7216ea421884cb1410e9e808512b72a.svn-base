package com.duzon.custom.common.utiles;

import com.jcraft.jsch.*;
import org.apache.commons.io.IOUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.web.multipart.MultipartFile;

import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletResponse;
import java.io.*;
import java.nio.file.*;
import java.util.*;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class CommFileUtil {
	private static final Logger logger = LoggerFactory.getLogger(CommFileUtil.class);

	public static void outputStream(HttpServletResponse response,FileInputStream in ) throws Exception {
		ServletOutputStream binaryOut = response.getOutputStream();
		byte buffer[] = new byte[8 * 1024];
		
		try {
			IOUtils.copy(in, binaryOut);
			binaryOut.flush();
		} catch ( Exception e ) {
		} finally {
			if (in != null) {
				try {
				in.close();
				}catch(Exception e ) {}
			}
			if (binaryOut != null) {
				try {
					binaryOut.close();
				}catch(Exception e ) {}
			}
		}	
	}

	public static void uploadService(String fileStr, String ext, String fileName, String dir) {
		try {
			InputStream inputStream = new ByteArrayInputStream(fileStr.getBytes("UTF-8"));
			Path path = Paths.get(dir + "/" + fileName + "." + ext);
			Files.copy(inputStream, path, new CopyOption[]{StandardCopyOption.REPLACE_EXISTING});
		} catch (IOException var6) {
			var6.printStackTrace();
		}
	}
}
